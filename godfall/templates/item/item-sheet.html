<!-- templates/item/item-sheet.html -->
<form class="{{cssClass}}" autocomplete="off">
  <header class="sheet-header">
    <img class="profile-img" src="{{item.img}}" data-edit="img" title="{{item.name}}"/>
    <div class="header-fields">
      <h1 class="charname"><input name="name" type="text" value="{{item.name}}" placeholder="Item Name"/></h1>
    </div>
  </header>
  
  <div class="sheet-body">
    <div class="item-details">
      
      <!-- Weapon-specific fields -->
      {{#if (eq item.type "weapon")}}
      <div class="form-group">
        <label>Weapon Skill</label>
        <select name="system.weaponSkill">
          <option value="swords" {{#if (eq system.weaponSkill "swords")}}selected{{/if}}>Swords</option>
          <option value="axes" {{#if (eq system.weaponSkill "axes")}}selected{{/if}}>Axes</option>
          <option value="polearms" {{#if (eq system.weaponSkill "polearms")}}selected{{/if}}>Polearms</option>
          <option value="bows" {{#if (eq system.weaponSkill "bows")}}selected{{/if}}>Bows</option>
          <option value="shields" {{#if (eq system.weaponSkill "shields")}}selected{{/if}}>Shields</option>
        </select>
      </div>
      <div class="form-group">
        <label>Damage</label>
        <input type="text" name="system.damage" value="{{system.damage}}" placeholder="1d8"/>
      </div>
      <div class="form-group">
        <label>Properties</label>
        <input type="text" name="system.properties" value="{{system.properties}}" placeholder="Light, Quick, etc."/>
      </div>
      <div class="form-group">
        <label>
          <input type="checkbox" name="system.versatile" {{#if system.versatile}}checked{{/if}}/>
          Versatile
        </label>
      </div>
      {{#if system.versatile}}
      <div class="form-group">
        <label>Versatile Damage (Two-Handed)</label>
        <input type="text" name="system.versatileDamage" value="{{system.versatileDamage}}" placeholder="1d10"/>
      </div>
      {{/if}}
      <div class="form-group">
        <label>Weapon HP</label>
        <div class="hp-fields">
          <input type="number" name="system.hp.value" value="{{system.hp.value}}" min="0"/>
          <span>/</span>
          <input type="number" name="system.hp.max" value="{{system.hp.max}}" min="0"/>
        </div>
      </div>
      {{/if}}

      <!-- Armor-specific fields -->
      {{#if (eq item.type "armor")}}
      <div class="form-group">
        <label>Armor Type</label>
        <select name="system.armorType">
          <option value="light" {{#if (eq system.armorType "light")}}selected{{/if}}>Light</option>
          <option value="medium" {{#if (eq system.armorType "medium")}}selected{{/if}}>Medium</option>
          <option value="heavy" {{#if (eq system.armorType "heavy")}}selected{{/if}}>Heavy</option>
        </select>
      </div>
      <div class="form-group">
        <label>Damage Resistance (DR)</label>
        <input type="number" name="system.dr" value="{{system.dr}}" min="0"/>
      </div>
      <div class="form-group">
        <label>Evasion Penalty</label>
        <input type="number" name="system.evasionPenalty" value="{{system.evasionPenalty}}" max="0"/>
      </div>
      <div class="form-group">
        <label>Armor HP</label>
        <div class="hp-fields">
          <input type="number" name="system.hp.value" value="{{system.hp.value}}" min="0"/>
          <span>/</span>
          <input type="number" name="system.hp.max" value="{{system.hp.max}}" min="0"/>
        </div>
      </div>
      {{/if}}

      <!-- Shield-specific fields -->
      {{#if (eq item.type "shield")}}
      <div class="form-group">
        <label>Hardness</label>
        <input type="number" name="system.hardness" value="{{system.hardness}}" min="0"/>
      </div>
      <div class="form-group">
        <label>Shield HP</label>
        <div class="hp-fields">
          <input type="number" name="system.hp.value" value="{{system.hp.value}}" min="0"/>
          <span>/</span>
          <input type="number" name="system.hp.max" value="{{system.hp.max}}" min="0"/>
        </div>
      </div>
      {{/if}}

      <!-- Gear-specific fields -->
      {{#if (eq item.type "gear")}}
      <div class="form-group">
        <label>Gear Type</label>
        <select name="system.gearType">
          <option value="adventuring" {{#if (eq system.gearType "adventuring")}}selected{{/if}}>Adventuring</option>
          <option value="tools" {{#if (eq system.gearType "tools")}}selected{{/if}}>Tools</option>
          <option value="container" {{#if (eq system.gearType "container")}}selected{{/if}}>Container</option>
          <option value="light" {{#if (eq system.gearType "light")}}selected{{/if}}>Light Source</option>
        </select>
      </div>
      {{/if}}

      <!-- Service-specific fields -->
      {{#if (eq item.type "service")}}
      <div class="form-group">
        <label>Service Type</label>
        <select name="system.serviceType">
          <option value="lodging" {{#if (eq system.serviceType "lodging")}}selected{{/if}}>Lodging</option>
          <option value="food" {{#if (eq system.serviceType "food")}}selected{{/if}}>Food & Drink</option>
          <option value="transportation" {{#if (eq system.serviceType "transportation")}}selected{{/if}}>Transportation</option>
          <option value="labor" {{#if (eq system.serviceType "labor")}}selected{{/if}}>Labor</option>
          <option value="communication" {{#if (eq system.serviceType "communication")}}selected{{/if}}>Communication</option>
        </select>
      </div>
      <div class="form-group">
        <label>Duration</label>
        <input type="text" name="system.duration" value="{{system.duration}}" placeholder="per night, per day, etc."/>
      </div>
      {{/if}}

      <!-- Spell-specific fields -->
      {{#if (eq item.type "spell")}}
      <div class="form-group">
        <label>Tradition</label>
        <select name="system.tradition">
          <option value="general" {{#if (eq system.tradition "general")}}selected{{/if}}>General</option>
          <option value="elemental" {{#if (eq system.tradition "elemental")}}selected{{/if}}>Elemental</option>
          <option value="conjuring" {{#if (eq system.tradition "conjuring")}}selected{{/if}}>Conjuring</option>
          <option value="mental" {{#if (eq system.tradition "mental")}}selected{{/if}}>Mental</option>
          <option value="life" {{#if (eq system.tradition "life")}}selected{{/if}}>Life</option>
          <option value="spirit-touched" {{#if (eq system.tradition "spirit-touched")}}selected{{/if}}>Spirit-Touched</option>
        </select>
      </div>
      <div class="form-group">
        <label>Rank</label>
        <select name="system.rank" data-dtype="Number">
          <option value="0" {{#if (eq system.rank 0)}}selected{{/if}}>Cantrip (0)</option>
          <option value="1" {{#if (eq system.rank 1)}}selected{{/if}}>Rank 1</option>
          <option value="2" {{#if (eq system.rank 2)}}selected{{/if}}>Rank 2</option>
          <option value="3" {{#if (eq system.rank 3)}}selected{{/if}}>Rank 3</option>
          <option value="4" {{#if (eq system.rank 4)}}selected{{/if}}>Rank 4</option>
        </select>
      </div>
      <div class="form-group">
        <label>WP Cost</label>
        <input type="number" name="system.cost" value="{{system.cost}}" min="0"/>
      </div>
      <div class="form-group">
        <label>Casting Time</label>
        <input type="text" name="system.castingTime" value="{{system.castingTime}}" placeholder="1 action"/>
      </div>
      <div class="form-group">
        <label>Range</label>
        <input type="text" name="system.range" value="{{system.range}}" placeholder="touch, 30 feet, etc."/>
      </div>
      <div class="form-group">
        <label>Duration</label>
        <input type="text" name="system.duration" value="{{system.duration}}" placeholder="instantaneous, 1 hour, etc."/>
      </div>
      <div class="form-group">
        <label>
          <input type="checkbox" name="system.concentration" {{#if system.concentration}}checked{{/if}}/>
          Concentration
        </label>
      </div>
      <div class="form-group">
        <label>Scaling/Damage Formula</label>
        <input type="text" name="system.scaling" value="{{system.scaling}}" placeholder="1d4, 2d6, etc."/>
      </div>
      {{/if}}

      <!-- Talent-specific fields -->
      {{#if (eq item.type "talent")}}
      <div class="form-group">
        <label>Talent Type</label>
        <select name="system.talentType">
          <option value="general" {{#if (eq system.talentType "general")}}selected{{/if}}>General</option>
          <option value="warrior" {{#if (eq system.talentType "warrior")}}selected{{/if}}>Warrior</option>
          <option value="rogue" {{#if (eq system.talentType "rogue")}}selected{{/if}}>Rogue</option>
          <option value="spellcaster" {{#if (eq system.talentType "spellcaster")}}selected{{/if}}>Spellcaster</option>
          <option value="spirit-touched" {{#if (eq system.talentType "spirit-touched")}}selected{{/if}}>Spirit-Touched</option>
        </select>
      </div>
      <div class="form-group">
        <label>Prerequisite</label>
        <input type="text" name="system.prerequisite" value="{{system.prerequisite}}" placeholder="Level 3, Warrior archetype, etc."/>
      </div>
      <div class="form-group">
        <label>
          <input type="checkbox" name="system.repeatable" {{#if system.repeatable}}checked{{/if}}/>
          Repeatable
        </label>
      </div>
      {{/if}}

      <!-- Common fields for physical items -->
      {{#if (or (eq item.type "weapon") (eq item.type "armor") (eq item.type "shield") (eq item.type "gear"))}}
      <div class="form-group">
        <label>Cost (Coins)</label>
        <input type="number" name="system.cost" value="{{system.cost}}" min="0"/>
      </div>
      <div class="form-group">
        <label>Weight (lbs)</label>
        <input type="number" name="system.weight" value="{{system.weight}}" step="0.1" min="0"/>
      </div>
      <div class="form-group">
        <label>Quantity</label>
        <input type="number" name="system.quantity" value="{{system.quantity}}" min="1"/>
      </div>
      <div class="form-group">
        <label>
          <input type="checkbox" name="system.equipped" {{#if system.equipped}}checked{{/if}}/>
          Equipped
        </label>
      </div>
      {{/if}}

      <!-- Cost field for services -->
      {{#if (eq item.type "service")}}
      <div class="form-group">
        <label>Cost (Coins)</label>
        <input type="number" name="system.cost" value="{{system.cost}}" min="0"/>
      </div>
      {{/if}}
    </div>
    
    <div class="item-description">
      <h3>Description</h3>
      <textarea name="system.description" rows="12">{{system.description}}</textarea>
    </div>
  </div>
</form>
